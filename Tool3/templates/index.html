<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CheerCheck - 用户评论改善建议生成工具</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css"
    />
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
  </head>
  <body>
    <div class="container-fluid main-container">
      <header class="text-center py-5 gradient-header">
        <div class="header-content">
          <h1 class="display-5 fw-bold mb-3">CheerCheck</h1>
          <p class="lead fs-5">基于AI的用户评论改善建议生成工具</p>
        </div>
      </header>

      <div class="row justify-content-center">
        <div class="col-12 col-md-10 col-lg-8">
          <div class="card shadow-lg">
            <div class="card-body p-4 p-md-5">
              <form id="cheerCheckForm">
                <!-- 数据源选择 -->
                <div class="mb-4">
                  <label class="form-label fs-6 fw-bold text-primary">
                    <i class="bi bi-upload me-2"></i>选择数据来源方式
                  </label>
                  <div class="form-check mb-2">
                    <input
                      class="form-check-input"
                      type="radio"
                      name="dataSource"
                      id="urlRadio"
                      value="url"
                      checked
                    />
                    <label class="form-check-label fs-6" for="urlRadio">
                      通过URL获取评论数据
                    </label>
                  </div>
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="radio"
                      name="dataSource"
                      id="fileRadio"
                      value="file"
                    />
                    <label class="form-check-label fs-6" for="fileRadio">
                      上传本地评论数据文件
                    </label>
                  </div>
                </div>

                <!-- URL 输入框 (默认显示) -->
                <div class="mb-4" id="urlGroup">
                  <label
                    for="urlInput"
                    class="form-label fs-6 fw-bold text-primary"
                  >
                    <i class="bi bi-link-45deg me-2"></i
                    >输入需要获取数据的URL链接
                  </label>
                  <div class="input-group">
                    <span class="input-group-text">https://</span>
                    <input
                      type="url"
                      class="form-control form-control-lg"
                      id="urlInput"
                      placeholder="amazon.com/product-page"
                    />
                  </div>
                  <div class="form-text fs-6">
                    在您浏览到需要拉取评论的网站后将网址粘贴在此
                  </div>
                </div>

                <!-- 文件上传组件 (默认隐藏) -->
                <div class="mb-4" id="fileGroup" style="display: none">
                  <label
                    for="fileInput"
                    class="form-label fs-6 fw-bold text-primary"
                  >
                    <i class="bi bi-file-earmark-text me-2"></i>上传评论数据文件
                  </label>
                  <input
                    class="form-control form-control-lg"
                    type="file"
                    id="fileInput"
                    accept=".json,.csv,.xlsx,.xls,.jpg,.png,.jpeg,.pdf"
                  />
                  <div class="form-text fs-6">
                    支持jpg、png、jpeg、pdf、Json、csv或Excel格式文件（最多上传一个文件）
                  </div>
                </div>

                <!-- 提示词输入框 (可选) -->
                <div class="mb-5">
                  <div class="form-check mb-3">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      id="promptCheckbox"
                    />
                    <label
                      class="form-check-label fs-6 fw-bold text-primary"
                      for="promptCheckbox"
                    >
                      添加自定义提示词（可选）
                    </label>
                  </div>
                  <div id="promptGroup" style="display: none">
                    <label
                      for="promptInput"
                      class="form-label fs-6 fw-bold text-primary"
                    >
                      <i class="bi bi-pencil-square me-2"></i>输入您的提示词
                    </label>
                    <textarea
                      class="form-control form-control-lg"
                      id="promptInput"
                      rows="4"
                      placeholder="例如：请针对此产品给出5条具体的改进建议，重点关注用户体验和界面设计方面..."
                    ></textarea>
                    <div class="form-text fs-6">
                      详细描述您希望AI如何分析评论并生成改进建议
                    </div>
                  </div>
                </div>

                <div class="d-flex justify-content-center gap-3 mt-4">
                  <!-- 一键整理数据按钮 -->
                  <button
                    type="button"
                    id="organizeDataButton"
                    class="btn btn-success btn-lg fs-6 px-4 py-2"
                  >
                    <i class="bi bi-file-earmark-text me-2"></i>整理数据
                  </button>

                  <!-- 一键生成改进意见按钮 -->
                  <button
                    type="button"
                    id="generateButton"
                    class="btn btn-primary btn-lg fs-6 px-4 py-2"
                  >
                    <i class="bi bi-lightning-charge me-2"></i>生成改进意见
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>

      <!-- 结果展示区域（初始隐藏） -->
      <div
        class="row justify-content-center mt-5"
        id="resultsSection"
        style="visibility: hidden"
      >
        <div class="col-12 col-md-10 col-lg-8">
          <div class="card shadow-lg">
            <div class="card-header bg-primary text-white">
              <h3 class="mb-0 fs-5">
                <i class="bi bi-card-checklist me-2"></i>改进建议结果
              </h3>
            </div>
            <div class="card-body">
              <div id="resultsContent" class="fs-6">
               <!-- 结果框用js动态渲染在此 -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <footer class="bg-light py-4 mt-5">
      <div class="container">
        <div class="text-center text-muted">
          <p class="mb-0 fs-6">© 2025 MOKA 版权所有</p>
        </div>
      </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  </body>
</html>
